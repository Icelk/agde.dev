<!DOCTYPE html>
<html>
    <head>
        <meta name="color-scheme" content="dark light" />
    </head>
    <body>
        <h1>Agde demo</h1>
        <p>To ensure privacy and avoid misuse of the service, this demo is invite-only for the time being.</p>
        <input id="username" placeholder="Username" />
        <input id="password" placeholder="Password" type="password" />
        <button id="login">Log in</button>
        <script>
            let username = document.getElementById("username")
            let password = document.getElementById("password")
            let login = document.getElementById("login")
            password.addEventListener("keydown", (e) => {
                if (e.code === "Enter") {
                    login.click()
                }
            })
            login.addEventListener("click", async () => {
                let u = username.value
                let p = password.value
                let response = await fetch("/demo/auth", { method: "PUT", body: `${u.length}\n${u}${p}` })
                if (response.status === 200) {
                    location = "/demo/"
                } else {
                    login.innerText = "Invalid credentials. Try again..."
                }
            })
        </script>
    </body>
</html>
